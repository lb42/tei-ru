<?xml version="1.0"?>
<?oxygen RNGSchema="p5odds.rnc" type="compact"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0">
  <teiHeader>
    <fileDesc>
      <titleStmt>
<!--title>Exercise 2</title-->
       <title>Упражнение 2. Oxygen: работаем со схемой.</title>
      </titleStmt>
      <publicationStmt>
        <publisher>TEI</publisher>
        <availability>
          <p>Freely available for use and derivative works under a Creative Commons Attribution
            license.</p>
        </availability>
        <date>2008-07-07</date>
      </publicationStmt>
      <sourceDesc>
        <p>Some bits may be lifted from previous talks/workshops by the TEI Community and certainly
          from the TEI P5 1.0 Release of the Guidelines.</p>
      </sourceDesc>
    </fileDesc>
    <revisionDesc>
      <change>
        <date>$LastChangedDate: 2008-07-21 11:56:54 +0100 (Mon, 21 Jul 2008) $.</date>
        <name>$LastChangedBy: rahtz $</name>
        <note>$LastChangedRevision: 3096 $</note>
      </change>
    </revisionDesc>
  </teiHeader>
  <text xml:lang="ru">
    <body>
      <div>
        <head>Работаем со схемой TEI</head>
        <p>Сегодня мы узнаем, как: <list>
            <item>с помощью шаблона Oxygen создать корректный TEI-документ;</item>
            <item>с помощью веб-программы Roma создать схему TEI</item>
          </list>
        </p>

        <div>
          <head>Использование шаблона Oxygen</head>
          <p>На первом практическом занятии мы создали правильно структурированный документ, 
            но мы в наши задачи не входило задать соответствие документа какой-либо схеме.</p>
          <p>В дистрибутив Oxygen входят готовые <term>шаблоны</term> для большого числа 
            популярных схем, в том числе и TEI. Воспользуемся одной из них, чтобы создать
            простейший <term>паспорт документа</term> TEI для стихотворения, которое мы размечали
              вчера.</p>
          <p>Запускаем Oxygen. И хотя мы видим, что документы, с которыми мы работали в последний 
            раз, открываются автоматически, сегодня мы начнем с создания нового документа.<list
              type="ordered">
              <item>
                <p>Как и в прошлый раз, для того чтобы открыть диалоговое окно создания
                    документа, делаем клик на иконе New Document в верхнем левом углу (альтернативные
                    варианты: выбираем New Document в меню File или набираем комбинацию CTRL-N). Но
                    на этот раз выбираем закладку <ident>from Templates</ident>.</p>
                <p>
                  <graphic width="5in" url="../Graphics/oxy-newtemp-1.png"/>
                </p>
                <p>Выбираем из списка опций TEI P5 - Lite и нажимаем OK.</p>
              </item>
              <item>
                <p>Открывается новое окно редактирования, в котором уже проставлены 
                  необходимые для «действительного» «паспорта TEI-документа» элементы.</p>
                <p><graphic width="5in" url="../Graphics/oxy-newtemp-2.png"/>. </p>
                <p>Меняем на русский английский текст, напечатанный вместо заглавия (title),
                    выходных данных (publication statement) и описания источника (sourceDesc) нашего
                    электронного издания стихотворения Пушкина.</p>
              </item>
              <item>Теперь заменим содержимым файла, который мы
                  подготовили вчера, текст <code><![CDATA[<p>Some text here.</p>]]></code> внутри элемента 
                <gi>text</gi> (расположен за <gi>teiHeader</gi>). Простейший способ — воспользоваться 
                методом «вырезания и вставки»: <list>
                  <item>Активизируем окно, в котором мы работали со стихотворением Пушкина (окно 
                    обозначено закладкой <ident>pushkin.xml</ident>).</item>
                  <item>С помощью мыши полностью выделяем элемент <gi>div type="poem"</gi></item>
                  <item>Нажимаем CTRL-c (или выбираем опцию Copy в меню Edit)</item>
                  <item>Теперь активизируем наш новый файл, который мы только что создали (если мы не 
                    сохранили его под другим именем, он, скорее всего, называется <ident>untitled.xml</ident>). </item>
                  <item>С помощью мыши выделяем текст <code><![CDATA[<p>Some text here.</p>]]></code> и 
                    нажимаем CTRL-v (или выбираем Paste в меню Edit), чтобы заменить его размеченным текстом 
                    стихотворения А.С. Пушкина</item>
                </list></item>
              <item>Теперь посмотрим, пройдет ли наш файл валидацию и, если нет,
                  то что нужно для этого сделать?</item>
              <item>Вернемся к <gi>teiHeader</gi> и добавим элемент <gi>revisionDesc</gi>, чтобы
                  указать, когда мы вносили изменения в документ.<list>
                  <item>С помощью мыши помещаем курсор непосредственно за конечным тегом
                      <gi>/fileDesc</gi></item>
                  <item>
                    <p>Набираем символ &lt; и видим, что Oxygen предлагает 
                        нам список всех допустимых в данном месте (согласно схеме) элементов и их
                        описания.</p>
                    <p>
                      <graphic width="5in" url="../Graphics/oxy-elem.png"/>
                    </p>
                  </item>
                  <item>С помощью стрелок клавиатуры 
                      доходим до нужного нам элемента <gi>revisionDesc</gi>, и нажимаем ENTER.</item>
                  <item>Обратите внимание, что сейчас курсор находится внутри
                      начального тега <gi>revisionDesc</gi>, позволяя нам вставить атрибуты. Но
                      сейчас атрибуты нам не нужны, поэтому мы, пользуясь стрелкой «вправо», помещаем
                      курсор перед конечным тегом, и снова набираем &lt;.</item>
                  <item>Программа предлагает нам два элемента: <gi>list</gi> или
                        <gi>change</gi>; мы выбираем второй вариант.
                  </item>
                  <item>Курсор, как и в прошлый раз, находится 
                      внутри начального тега, и теперь мы набираем пробел.</item>
                  <item>
                    <p>Из появившегося длинного списка атрибутов, предусмотренных для элемента <gi>change</gi>,
                        выбираем <ident>when</ident> и нажимаем ENTER.
                    </p>
                    <p>
                      <graphic width="5in" url="../Graphics/oxy-attr.png"/>
                    </p>
                  </item>
                  <item>В качестве значения атрибута вводим сегодняшнюю дату в формате 
                    <code>ГГГГ-ММ-ДД</code>. А теперь попробуем ввести несуществующую дату 
                    (например, 32 августа) и посмотрим, что получится.</item>
                  <item>В качестве содержания элемента <gi>change</gi> набираем 
                      небольшой текст (например, <q>Первая версия, прошедшая валидацию по схеме
                      TEI</q>).
                  </item>
                </list></item>
              <item>А теперь можно поэкспериментировать и посмотреть, какие элементы могут 
                быть использованы в разных частях нашего документа.</item>
              <item>Теперь, чтобы увидеть документ целиком,
                  нажимаем на кнопку Author в нижней части экрана. И не забудьте сохранить
                документ!</item>
            </list>
          </p>
        </div>

        <div>
          <head>Создаем схему TEI</head>
          <p>В предыдущем задании мы работали с готовой схемой TEI,
              которая называется TEI Lite. Эта схема достаточна для разметки большей части самых
              разных TEI-документов, при этом количество предлагаемых ею возможностей значительно
              больше, чем необходимо подавляющему большинству пользователей. Но если мы хотим
              создать точно отвечающую нашим потребностям схему (любой сложности), мы можем
              воспользоваться веб-программой Roma. Для начала попробуем создать очень простую
              схему.<list type="ordered">
              <item>Открываем <ptr target="http://www.tei-c.org/Roma/"/> (подойдет любой
                  браузер).</item>
              <item>
                <p>Нажимаем на кнопку, обозначенную 
                    «Create Customization from Template». Выбираем «Absolutely Bare» (опция по
                    умолчанию).</p>
                <p>
                  <graphic width="5in" url="../Graphics/roma-bare.png"/>
                </p>
              </item>
              <item>Нажимаем на большую красную кнопку в левом нижнем углу окна.</item>
              <item>
                <p>Roma выводит на экран информацию о схеме, которую мы собираемся создать.</p>
                <p>
                  <graphic width="5in" url="../Graphics/roma-param.png"/>
                </p>
              </item>
              <item>
                <p>Roma предлагает ряд функций, доступ к которым осуществляется с помощью кнопок, 
                  расположенных в ряд в верхней части экрана. Предусмотрена и возможность выбора 
                  языка интерфейса. Если мы хотим работать на русском языке, выделяем с помощью клика 
                  круглую кнопку рядом со словом «Russian», а потом опять нажимаем на большую красную
                  кнопку в левом нижнем углу.</p>
                <p>
                  <graphic width="5in" url="../Graphics/roma-param-ru.png"/>
                </p>
              </item>
              <item>Пока мы просто хотим получить схему. Нажимаем
                  на кнопку с надписью <ident>Schema</ident> (Схема).</item>
              <item>
                <p>Теперь мы можем выбрать язык схемы из данного
                    списка. Выбираем вариант по умолчанию: Relax NG schema (compact syntax) и опять
                    нажимаем на большую красную кнопку в нижнем левом углу.</p>
                <p>
                  <graphic width="5in" url="../Graphics/roma-rnc.png"/>
                </p>
              </item>
              <item>Сохраняем полученный файл <ident>tei_bare.rnc</ident> в нашу рабочую папку. 
                Теперь мы можем перейти к выполнению следующего упражнения.</item>
            </list>
          </p>

        </div>


        <div>
          <head>Размечаем Mr Punch</head>

          <p>Задача этого упражнения - разметить одну из страниц газеты «Punch». Нам помогут
              файлы из рабочей папки, содержащие:<list>
                <item>цифровые фотографии каждой страницы (файлы с расширением .jpg, например
                    <ident>147_001.jpg</ident> – цифровая фотография первой страницы, файлы собраны
                  в папке <ident>Punch/Pages</ident>);</item>
                <item>неразмеченный текст каждой страницы (файлы с расширением .txt, например
                    <ident>147_001.jpg</ident> – текст первой страницы, файлы собраны в папке
                    <ident>Punch/Text</ident> (для второй страницы);</item>
                <item>иллюстрации (файлы с расширением .png, например <ident>003.png</ident> –
                  иллюстрации третьей страницы, файлы собраны в папке <ident>XML/Graphics</ident>);</item>
                <item>образец «паспорта TEI» (файл <ident>XML/punchHdr.xml</ident>), паспорт можно
                  редактировать, либо просто присоединить к документу.</item>
              </list>
          </p>
          <p>Сначала выбираем страницу, которую мы хотим разметить. Одни страницы разметить 
            будет нетрудно, а над другими придется поломать голову!</p>
          <p>Снова запускаем Oxygen и создаем новый документ. Мы это уже умеем. Не забудьте в диалоге 
            <title>Create an XML Document</title> проверить наличие галочки около пункта <title>Use a DTD or
              Schema</title>.</p>
          <p>Открываем закладку <ident>Relax NG</ident> и находим папку, в
              которой мы сохранили полученный от Roma в предыдущем упражнении файл tei_bare.rnc.
              Этот файл и будет нашей схемой.</p>
          <p>Мы уже многое знаем и умеем, и нам будет нетрудно... <list>
                <item>вставить в начало нового документа предложенный по умолчанию паспорт TEI; </item>
                <item>выяснить, какие элементы предусмотрены схемой для разметки текста;</item>
                <item>выбрать нужные элементы и разметить соответствующие части текста.</item>
              </list>
          </p>
          <p>Давайте посмотрим, как глубоко мы можем разметить нашу страницу? Не
              расстраивайтесь, если ответом на наш вопрос будет: <q>Не слишком!</q>, ведь «голая»
              схема по сути предлагает лишь абзацы и списки. 
          </p>
          <p>Для того, чтобы иметь в своем распоряжении больше элементов, нам нужно изменить 
            схему. И теперь мы вернемся к Roma и выясним, что еще он может нам предложить.</p>
        </div>
        <div>
          <head>Более развернутая схема</head>
          <p>Итак, наша задача - создать более сложную модификацию схемы tei_bare,
              добавив к ней несколько элементов, необходимых для разметки текстов из «Punch».</p>
          <list type="ordered">
            <item>Запускаем Roma и выбираем персонализацию Bare Bones. Мы уже это
              делали.</item>
            <item>
              <p>Открываем закладку <ident>Modules</ident> (Модули). Перед нами список 
                доступных модулей (слева) и выбранные модули (справа).</p>
              <p><graphic width="5in" url="../Graphics/roma-1-ru.png"/>) </p>
            </item>
            <item>Чтобы добавить модуль в список выбранных модулей (справа на экране), делаем клик на
             <code>Add</code> (<code>Добавление </code>), находящемся в левой стороне экрана
                рядом со словом <ident>figures</ident> (‘изображения’).</item>
            <item>Посмотрим, какие элементы каждого из модулей используются в нашей схеме. 
              Сначала сделаем клик на слове <code>core</code> из правого списка.</item>
            <item>Перед нами длинный список элементов. Мы можем:<list>
                <item>указать, следует ли включить (кнопка <ident>Включить</ident> выделена точкой)
                  или исключить (выделена кнопка <ident>Исключить</ident>) тот или иной
                    элемент;</item>
                <item>изменить название элемента (не рекомендуется!);</item>
                <item>сделать клик на вопросительный знак, чтобы прочитать определение этого
                  элемента в «Руководстве TEI» в Интернете...</item>
                <item>... или ознакомиться с кратким описанием элемента;</item>
                <item>сделав клик на <code>Изменение атрибутов </code>, просмотреть список атрибутов,
                    предусмотренных для данного элемента.</item>
              </list>
              <p>
                <graphic width="5in" url="../Graphics/roma-elements.png"/>
              </p></item>
            <item>Так выглядит минимальный список элементов для
                элементарной разметки страницы «Punch»: <gi>bibl</gi>, <gi>cit</gi>,
                <gi>graphic</gi>, <gi>hi</gi>, <gi>l</gi>, <gi>lg</gi>, <gi>name</gi>, <gi>pb</gi>,
                  <gi>q</gi>, <gi>sp</gi>, <gi>speaker</gi> и <gi>stage</gi>. Но ничто не мешает
                нам рассмотреть и добавить другие элементы!</item>
            <item>Если мы закончили
                выбирать элементы, нажимаем на кнопку <ident>Submit Query</ident> в левом нижнем
                углу и таким образом обновляем схему (теперь она содержит все выбранные нами
                элементы). Нажимаем на кнопку <ident>Back</ident> и возвращаемся к списку
              модулей.</item>
            <item>Просматриваем 
                список элементов модуля <ident>figures</ident> (этот модуль мы уже добавили к
                схеме). Хотя элементов немного, мы можем смело удалить элемент <gi>formula</gi> – 
              он нам не потребуется</item>
            <item>Если набор элементов нас устраивает, опять делаем клик на кнопку
                <ident>Схема</ident>.</item>
            <item>Сохраняем созданную схему в файле формата RNC (как и в прошлый раз).</item>
            <item>Мы также можем сделать клик на  <ident>Documentation</ident> и создать 
              документацию для наших коллег.</item>
          </list>

          <p>Теперь дело за вами! Откройте Oxygen и посмотрите, как, используя новую схему, можно усовершенствовать
              разметку документа, с которым мы работали.</p>
          <p>
          Чтобы заменить старую схему <ident>teibare</ident> новой, мы должны: 
            <list>
            <item>удалить размещенную в начале нашего документа инструкцию обработки
              (она, скорее всего, выглядит так: <code>&lt;?oxygen
                RNGSchema="http://www.tei-c.org/release/xml/tei/custom/schema/relaxng/tei_bare.rng"
                type="xml"?></code>);</item> 
              <item>выбрать опцию «Associate Schema» в меню «Document» → «XML Document»; <p>
                <graphic width="5in" url="../Graphics/oxy-assoc.png"/>  </p></item>
              <item>указать файл, в котором мы сохранили схему, созданную для нас Roma.</item>
            </list>
            </p>
        </div>
      </div>
    </body>
  </text>
</TEI>
